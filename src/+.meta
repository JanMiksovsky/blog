slugs = postSlugs(../posts):
html = mapDeep(slugs, mdHtml, '.md', '.html'):
templated = mapDeep(html, post.ori):
pages = mapDeep(html, postPage.ori):

# recent = html/2005:
reversed = reverse(html):
recent = takeDeep(reverse(html), 10):
feedItems.yaml = map(valuesDeep(recent), feedItem):

develop:
  client = ../client:
  images = ../images:
  index.html = index.ori():
  posts = mergeDeep(this, pages):
    index.html = yearIndex.ori():
    "[year]":
      index.yaml = html/{{year}}:
      index.html = year.ori(index.yaml):
  feed.json:
    # Top-level feed data in JSON Feed format
    # See https://www.jsonfeed.org/version/1.1/
    version: https://jsonfeed.org/version/1.1
    title: Jan Miksovsky’s blog
    description: Writings on the craft of user interface design and development
    feed_url: https://jan.miksovsky.com/feed.json
    home_page_url: https://jan.miksovsky.com
    items = feedItems.yaml:
  rss.xml = feedRss(feed.json):

production = filter(develop, this):
  client: true
  feed.json: true
  images: true
  posts: true
  rss.xml: true
  …index.html: true
